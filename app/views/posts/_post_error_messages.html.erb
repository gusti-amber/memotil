<!-- 🎓 ぼっち演算子&.を使わないと`spec/system/posts_spec.rb`のテストが失敗するので注意 -->
<!-- おそらく、object.postableがnilの場合、NoMethodErrorが発生するため。 -->
<% if object.errors.any? || object.postable&.errors&.any? %>
  <div class="text-sm text-custom-rust mt-1">
    <!-- object.postable(Postable)のエラー(TextPostの場合のみ表示) -->
    <% if object.postable.is_a?(TextPost) %>
      <% object.postable.errors.full_messages.each do |message| %>
        <div class="flex items-center gap-1">
          <span><%= message %></span>
        </div>
      <% end %>
    
    <!-- object(Post)自体のエラー（DocumentPostの場合のみ表示） -->
    <!-- 🎓 DocumentPostの投稿が失敗した場合、object.postableはnilになるため、エラーメッセージを取得できない。 -->
    <!-- そのため、Postsコントローラーでobjectにerrorsを追加し、この箇所でエラーを表示する。-->
    <% elsif object.postable.is_a?(DocumentPost) %>
      <% object.errors.full_messages.each do |message| %>
        <div class="flex items-center gap-1">
          <span><%= message %></span>
        </div>
      <% end %>
    <% end %>
  </div>
<% end %>
