<div class="flex justify-center">
  <div class="flex flex-col gap-6 p-12 max-w-2xl w-full">
    <!-- „Ç®„É©„Éº„É°„ÉÉ„Çª„Éº„Ç∏ -->
    <%= render 'shared/error_messages', object: @task %>

    <%= form_with model: @task, local: true, html: { class: "flex flex-col gap-6" } do |f| %>
      <!-- „Çø„Ç§„Éà„É´„Éï„Ç©„Éº„É† -->
      <div class="form-control">
        <%= f.label :title, class: "label text-sm text-custom-dark-green font-semibold" %>
        <div class="join w-full">
          <%= f.text_field :title, class: "input input-lg input-bordered join-item flex-1 bg-custom-white border-custom-dark-green text-base text-custom-dark-green focus:border-custom-dark-green focus:ring-2 focus:ring-custom-dark-green/20 focus:outline-none" %>
          <!-- ‚ôªÔ∏èonclick„Ç§„Éô„É≥„Éà„ÅØÊîπÂñÑ„ÅÆ‰ΩôÂú∞„ÅÇ„Çä„ÄÇ‰ªäÂæåStimulus„Ç≥„É≥„Éà„É≠„Éº„É©„Éº„ÅßÂÆüË£Ö‰∫àÂÆö -->
          <button type="button" 
            class="btn btn-lg btn-square join-item bg-custom-dark-green hover:bg-custom-dark-green/80 text-custom-white border-none"
            onclick="document.getElementById('task_title').value = ''">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
      </div>

      <!-- „Çø„Ç∞ÈÅ∏Êäû„Çª„ÇØ„Ç∑„Éß„É≥ -->
      <div class="form-control">
        <%= f.label :tag_ids, class: "label text-sm text-custom-dark-green font-semibold" %>
        
        <!-- „Çø„Ç∞ÈÅ∏Êäû„Éâ„É≠„ÉÉ„Éó„ÉÄ„Ç¶„É≥„É°„Éã„É•„Éº -->
        <div class="dropdown w-full">
          <!-- ‚ôªÔ∏èsafari„Éñ„É©„Ç¶„Ç∂Âê´„ÇÄ„Åô„Åπ„Å¶„ÅÆ„Éñ„É©„Ç¶„Ç∂„ÅßÂãï‰Ωú„Åô„Çã„Ç≥„Éº„Éâ„ÄÇhttps://daisyui.com/components/dropdown/#method-3-css-focus -->
          <div tabindex="0" role="button" class="btn btn-lg btn-outline w-full bg-custom-white border-custom-dark-green text-base text-custom-dark-green hover:bg-custom-dark-green hover:text-custom-white">
            <span>ÈÅ∏Êäû</span>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.0" stroke="currentColor" class="size-4">
              <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
            </svg>
          </div>

          <!-- üéìtabindex="0"„Å´„Çà„Çä„ÄÅ„É©„Éô„É´„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶„ÇÇÁîªÈù¢„ÅåÈñâ„Åò„Å™„Åè„Å™„Çã„ÄÇ-->
          <ul tabindex="0" class="dropdown-content bg-custom-white rounded-box z-[1] p-2 shadow w-full max-h-60 overflow-y-auto border">
            <% Tag.all.each do |tag| %>
              <li class="rounded p-1">
                <label class="flex items-center gap-2 text-custom-dark-green hover:text-custom-dark-green rounded cursor-pointer p-1 transition-colors duration-200">
                  <input type="checkbox" 
                          name="task[tag_ids][]" 
                          value="<%= tag.id %>"
                          <%= 'checked' if @task.tag_ids.include?(tag.id) %>
                          class="checkbox bg-custom-white border-custom-dark-green"
                          style="--chkbg: #233D31; --chkfg: #FCFCF9;">
                  <span><%= tag.name %></span>
                </label>
              </li>
            <% end %>
          </ul>
        </div>
      </div>

      <!-- ‚ôªÔ∏è„Çø„Ç∞Ê§úÁ¥¢„Çª„ÇØ„Ç∑„Éß„É≥ Â∞ÜÊù•ÁöÑ„Å´‰ª•‰∏ã„ÅÆÂÆüË£Ö„ÅßË°å„ÅÑ„Åü„ÅÑ„Åå„ÄÅjs„Åå„Åæ„Å†ÁêÜËß£‰∏çË∂≥„Å™„ÅÆ„ÅßÁΩÆ„ÅÑ„Å¶„Åä„Åè-->
      <%#= render partial: "tag_search_form", locals: { f: f, task: @task } %>

      <!-- „Ç¢„ÇØ„Ç∑„Éß„É≥„Éú„Çø„É≥ -->
      <div class="flex justify-end gap-4">
        <%= link_to "Êàª„Çã", task_path(@task), class: "btn btn-lg btn-outline border-custom-dark-green text-base text-custom-dark-green hover:bg-custom-dark-green hover:text-custom-white bg-transparent" %>
        <%= f.submit "Â§âÊõ¥", class: "btn btn-lg bg-custom-green hover:bg-custom-green/80 text-base text-custom-white border-none" %>
      </div>
    <% end %>
  </div>
</div>