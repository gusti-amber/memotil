<div class="flex flex-col h-full px-20 py-10">
  <!-- タスクのメイン情報セクション -->
  <%= render 'tasks/task_content', task: @task %>

  <% if @task.todo? %>
    <div class="flex justify-center">
      <div class="flex flex-col gap-6 p-12 max-w-2xl w-full">
        <!-- ToDoセクション -->
        <div class="card bg-base-200 shadow-sm w-full mb-1">
          <%= turbo_frame_tag "todo_section" do %>
            <div class="card-body">
              <%= render 'tasks/todo_section', task: @task %>
            </div>
          <% end %>
        </div>

        <!-- ボタン群 -->
        <div class="flex flex-col items-start gap-1 w-full">
          <%= render 'tasks/status_button', task: @task %>
          <%= render 'tasks/destroy_button', task: @task %>
        </div>
      </div>
    </div>
  <% elsif @task.doing? || @task.done? %>
    <div class="flex justify-center min-h-screen">
      <!-- 投稿セクション -->
      <div class="flex-1 flex flex-col justify-between w-full">
        <!-- 投稿一覧 -->
        <div class="flex-1 flex flex-col justify-start max-h-screen overflow-y-auto">
          <%= turbo_frame_tag "posts_list" do %>
            <%= render "posts/posts_list" %>
          <% end %>
        </div>

        <!-- 投稿フォーム -->
        <% if @task.doing? %>
          <%= turbo_frame_tag "post_form" do %>
            <%= render 'posts/form', task: @task, post: @post %>
          <% end %>
        <% end %>
      </div>

      <div class="divider divider-horizontal"></div>

      <!-- タスクのサブ情報サイドバー -->
      <div class="flex flex-col items-start gap-1 max-w-sm w-full">
        <% if @task.doing? %>
          <%= render 'tasks/doing_sidebar', task: @task %>
        <% elsif @task.done? %>
          <%= render 'tasks/done_sidebar', task: @task %>
        <% end %>
      </div>
    </div>
  <% end %>
</div>