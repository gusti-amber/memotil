<div class="flex justify-center">
  <div class="flex flex-col gap-6 p-12 max-w-2xl w-full">
    <p class="text-2xl font-bold text-dark-green text-center">アカウント設定</p>

    <!-- 🎨 エラーメッセージ表示を一つにまとめたが、UIの改善の余地あり。 -->
    <%= render "users/shared/error_messages", resource: resource %>

    <div class="flex flex-col items-start gap-6 w-full border border-base-content/20 p-6 rounded-lg">
      <p class="text-xl font-bold text-neutral text-start">プロフィール</p>

      <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put, class: "flex flex-col gap-6 w-full" }) do |f| %>

        <div class="field w-full">
          <%= f.label :name, class: "text-sm text-dark-green font-semibold" %><br />
          <%= f.text_field :name, autofocus: true, autocomplete: "name", placeholder: "name", class: "input input-lg input-bordered w-full bg-off-white border-dark-green text-base text-dark-green focus:border-dark-green focus:ring-2 focus:ring-dark-green/20 focus:outline-none placeholder:text-dark-green/50" %>
        </div>

        <div class="actions flex justify-center w-full">
          <%= f.submit "変更", class: "btn btn-lg btn-primary w-full text-base" %>
        </div>
      <% end %>
    </div>

    <div class="flex flex-col items-start gap-6 w-full border border-base-content/20 p-6 rounded-lg">
      <p class="text-xl font-bold text-neutral text-start">メールアドレス</p>

      <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put, class: "flex flex-col gap-6 w-full" }) do |f| %>

        <!-- 現在のメールアドレスの表示 -->
        <div class="field w-full">
          <label class="text-sm text-dark-green font-semibold">現在のメールアドレス</label><br />
          <div class="input input-lg input-bordered w-full bg-base-200 border-base-300 text-base text-base-content cursor-not-allowed">
            <%= current_user.email %>
          </div>
        </div>

        <!-- 新しいメールアドレスの入力フィールド -->
        <div class="field w-full">
          <%= f.label :email, "新しいメールアドレス", class: "text-sm text-dark-green font-semibold" %><br />
          <%= f.email_field :email, value: resource.unconfirmed_email.presence || "", autocomplete: "email", placeholder: "id@example.com", class: "input input-lg input-bordered w-full bg-off-white border-dark-green text-base text-dark-green focus:border-dark-green focus:ring-2 focus:ring-dark-green/20 focus:outline-none placeholder:text-dark-green/50" %>
        </div>

        <div class="actions flex justify-center w-full">
          <%= f.submit "確認メールを送信", class: "btn btn-lg btn-primary w-full text-base" %>
        </div>
      <% end %>
    </div>

    <%= link_to registration_path(resource_name),
        data: {
          turbo_method: :delete,
          turbo_confirm: <<~TEXT
            本当にアカウントを削除しますか？
            アカウントを削除すると、すべてのデータが永久に削除されます。
            復元することもできません。
          TEXT
        },
        class: "btn btn-lg btn-error w-full text-base" do %>
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
        <path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0" />
      </svg>
      アカウントを削除
    <% end %>
  </div>
</div>
